"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2226],{5394:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=s(4848),t=s(8453);const i={},o=void 0,l={id:"Strapi/Production basis/AWS Deployement",title:"AWS Deployement",description:"Configure EC2 as a Node.js server\u200b",source:"@site/docs/Strapi/Production basis/AWS Deployement.md",sourceDirName:"Strapi/Production basis",slug:"/Strapi/Production basis/AWS Deployement",permalink:"/docu/docs/Strapi/Production basis/AWS Deployement",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Strapi/Production basis/AWS Deployement.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Translate your site",permalink:"/docu/docs/tutorial-extras/translate-your-site"},next:{title:"Certbot",permalink:"/docu/docs/Strapi/Production basis/Certbot"}},a={},c=[{value:"Configure EC2 as a Node.js server\u200b",id:"configure-ec2-as-a-nodejs-server",level:3},{value:"1. Setup the\xa0<code>.pem</code>\xa0file\u200b",id:"1-setup-thepemfile",level:4},{value:"2. Log in to your server as the default\xa0<code>ubuntu</code>\xa0user:\u200b",id:"2-log-in-to-your-server-as-the-defaultubuntuuser",level:4},{value:"3. Install\xa0<strong>Node.js</strong>\xa0with\xa0<strong>npm</strong>:\u200b",id:"3-installnodejswithnpm",level:4},{value:"4. Create and change npm&#39;s default directory.\u200b",id:"4-create-and-change-npms-default-directory",level:4},{value:"Install and Configure Git versioning on your server\u200b",id:"install-and-configure-git-versioning-on-your-server",level:3},{value:"1. Check to see if\xa0<code>Git</code>\xa0is installed\u200b",id:"1-check-to-see-ifgitis-installed",level:4},{value:"2.\xa0<strong>OPTIONAL:</strong>\xa0Install Git.\u200b",id:"2optionalinstall-git",level:4},{value:"3. Configure the global\xa0<strong>username</strong>\xa0and\xa0<strong>email</strong>\xa0settings:\xa0Setting up Git - Your Identity\u200b",id:"3-configure-the-globalusernameandemailsettingssetting-up-git---your-identity",level:4},{value:"Prepare and clone Strapi project to server\u200b",id:"prepare-and-clone-strapi-project-to-server",level:3},{value:"1. Install\xa0<code>pg</code>\xa0in your Strapi project.\u200b",id:"1-installpgin-your-strapi-project",level:4},{value:"2. Edit the\xa0<code>./config/database.js</code>\xa0file.\u200b",id:"2-edit-theconfigdatabasejsfile",level:4},{value:"3. Install the\xa0<strong>Strapi AWS S3 Upload Provider</strong>:\u200b",id:"3-install-thestrapi-aws-s3-upload-provider",level:4},{value:"4. Push your local changes to your project&#39;s GitHub repository\u200b",id:"4-push-your-local-changes-to-your-projects-github-repository",level:4},{value:"5. Deploy from GitHub\u200b",id:"5-deploy-from-github",level:4},{value:"6. Install\xa0<strong>PM2 Runtime</strong>\u200b",id:"6-installpm2-runtime",level:4},{value:"7. Configure\xa0<strong>PM2 Runtime</strong>\xa0to launch project on system startup.\u200b",id:"7-configurepm2-runtimeto-launch-project-on-system-startup",level:4},{value:"Create you first Administrator user\u200b",id:"create-you-first-administrator-user",level:3},{value:"1. Locate your\xa0<code>IPv4 Public IP</code>\u200b",id:"1-locate-youripv4-public-ip",level:4},{value:"2. Next, create your\xa0<strong>Administrator</strong>\xa0user, and login to Strapi\u200b",id:"2-next-create-youradministratoruser-and-login-to-strapi",level:4},{value:"Set up a webhook\u200b",id:"set-up-a-webhook",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h3,{id:"configure-ec2-as-a-nodejs-server",children:["Configure EC2 as a Node.js server",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#configure-ec2-as-a-nodejs-server",title:"Direct link to Configure EC2 as a Node.js server",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"You will set-up your EC2 server as a Node.js server. Including basic configuration and Git."}),"\n",(0,r.jsxs)(n.p,{children:["You will need your\xa0",(0,r.jsx)(n.strong,{children:"EC2"}),"\xa0ip address:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the\xa0",(0,r.jsx)(n.code,{children:"AWS Console"}),", navigate to the\xa0",(0,r.jsx)(n.code,{children:"AWS EC2"}),". In the top menu, click on\xa0",(0,r.jsx)(n.code,{children:"Services"}),"\xa0and do a search for\xa0",(0,r.jsx)(n.code,{children:"ec2"}),", click on\xa0",(0,r.jsx)(n.code,{children:"Virtual Servers in the cloud"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Click on\xa0",(0,r.jsx)(n.code,{children:"1 Running Instance"}),"\xa0and note the\xa0",(0,r.jsx)(n.code,{children:"IPv4 Public OP"}),"\xa0address. E.g.\xa0",(0,r.jsx)(n.code,{children:"1.2.3.4"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"1-setup-thepemfile",children:["1. Setup the\xa0",(0,r.jsx)(n.code,{children:".pem"}),"\xa0file",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#1-setup-the-pem-file",title:"Direct link to 1-setup-the-pem-file",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You downloaded, in a previous step, your\xa0",(0,r.jsx)(n.code,{children:"User"}),"\xa0.pem file. e.g.\xa0",(0,r.jsx)(n.code,{children:"ec2-strapi-key-pair.pem"}),". This needs to be included in each attempt to\xa0",(0,r.jsx)(n.code,{children:"SSH"}),"\xa0into your\xa0",(0,r.jsx)(n.code,{children:"EC2 server"}),". Move your\xa0",(0,r.jsx)(n.code,{children:".pem"}),"\xa0file to\xa0",(0,r.jsx)(n.code,{children:"~/.ssh/"}),", follow these steps:"]}),"\n",(0,r.jsxs)(n.li,{children:["On your local machine, navigate to the folder that contains your .pem file. e.g.\xa0",(0,r.jsx)(n.code,{children:"downloads"})]}),"\n",(0,r.jsxs)(n.li,{children:["Move the .pem file to\xa0",(0,r.jsx)(n.code,{children:"~/.ssh/"}),"\xa0and set file permissions:\xa0",(0,r.jsx)(n.code,{children:"Path:./path-to/.pem-file/"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mv ec2-strapi-key-pair.pem ~/.ssh/\r\nchmod 400 ~/.ssh/ec2-strapi-key-pair.pem\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"2-log-in-to-your-server-as-the-defaultubuntuuser",children:["2. Log in to your server as the default\xa0",(0,r.jsx)(n.code,{children:"ubuntu"}),"\xa0user:",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#2-log-in-to-your-server-as-the-default-ubuntu-user",title:"Direct link to 2-log-in-to-your-server-as-the-default-ubuntu-user",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udca1\xa0Tip"}),"\n",(0,r.jsxs)(n.p,{children:["In the future, each time you log into your\xa0",(0,r.jsx)(n.code,{children:"EC2"}),"\xa0server, you will need to add the path to the .pem file and add the IP address for your EC2 instance at the end, e.g.\xa0",(0,r.jsx)(n.code,{children:"ssh -i ~/.ssh/ec2-strapi-key-pair.pem ubuntu@1.2.3.4"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ssh -i ~/.ssh/ec2-strapi-key-pair.pem \r\nubuntu@1.2.3.4Welcome to Ubuntu 22.04.2 LTS (GNU/Linux 4.15.0-1032-aws x86_64)\r\n\r\n...\r\n\r\nTo run a command as administrator (user "root"), use "sudo <command>".See "man sudo_root" for details.\r\n\r\n*ubuntu@ip-1.2.3.4:~$\n'})}),"\n",(0,r.jsxs)(n.h4,{id:"3-installnodejswithnpm",children:["3. Install\xa0",(0,r.jsx)(n.strong,{children:"Node.js"}),"\xa0with\xa0",(0,r.jsx)(n.strong,{children:"npm"}),":",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#3-install-nodejs-with-npm",title:"Direct link to 3-install-nodejs-with-npm",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["Strapi currently supports\xa0",(0,r.jsx)(n.code,{children:"Node.js"}),"\xa0",(0,r.jsx)(n.code,{children:"v16.x.x"}),",\xa0",(0,r.jsx)(n.code,{children:"v18.x.x"}),", and\xa0",(0,r.jsx)(n.code,{children:"v20.x.x"}),". The following steps will install Node.js onto your EC2 server."]}),"\n",(0,r.jsx)(n.p,{children:"example using Node.js 20"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~\r\ncurl -sL https://deb.nodesource.com/setup_20.x | sudo -E bash -\r\n...\r\nsudo apt-get install nodejs\r\n...\r\nnode -v && npm -v\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The last command\xa0",(0,r.jsx)(n.code,{children:"node -v && npm -v"}),"\xa0should output two versions numbers, eg.\xa0",(0,r.jsx)(n.code,{children:"v20.x.x, 6.x.x"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"4-create-and-change-npms-default-directory",children:["4. Create and change npm's default directory.",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#4-create-and-change-npms-default-directory",title:"Direct link to 4. Create and change npm's default directory.",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["The following steps are based on\xa0",(0,r.jsx)(n.a,{href:"https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally",children:"how to resolve access permissions from npmjs.com"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a\xa0",(0,r.jsx)(n.code,{children:".npm-global"}),"\xa0directory and set the path to this directory for\xa0",(0,r.jsx)(n.code,{children:"node_modules"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~\r\nmkdir ~/.npm-globalnpm config set prefix '~/.npm-global'\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create (or modify) a\xa0",(0,r.jsx)(n.code,{children:"~/.profile"}),"\xa0file:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano ~/.profile\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Add these lines at the bottom of the\xa0",(0,r.jsx)(n.code,{children:"~/.profile"}),"\xa0file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# set PATH so global node modules install without permission issues\r\nexport PATH=~/.npm-global/bin:$PATH\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Lastly, update your system variables:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/.profile\n"})}),"\n",(0,r.jsx)(n.p,{children:"You are now ready to continue to the next section."}),"\n",(0,r.jsxs)(n.h3,{id:"install-and-configure-git-versioning-on-your-server",children:["Install and Configure Git versioning on your server",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#install-and-configure-git-versioning-on-your-server",title:"Direct link to Install and Configure Git versioning on your server",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["A convenient way to maintain your Strapi application and update it during and after initial development is to use\xa0",(0,r.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control",children:"Git"}),". In order to use Git, you will need to have it installed on your EC2 instance. EC2 instances should have Git installed by default, so you will first check if it is installed and if it is not installed, you will need to install it."]}),"\n",(0,r.jsx)(n.p,{children:"The next step is to configure Git on your server."}),"\n",(0,r.jsxs)(n.h4,{id:"1-check-to-see-ifgitis-installed",children:["1. Check to see if\xa0",(0,r.jsx)(n.code,{children:"Git"}),"\xa0is installed",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#1-check-to-see-if-git-is-installed",title:"Direct link to 1-check-to-see-if-git-is-installed",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["If you see a\xa0",(0,r.jsx)(n.code,{children:"git version 2.x.x"}),"\xa0then you do have\xa0",(0,r.jsx)(n.code,{children:"Git"}),"\xa0installed. Check with the following command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git --version\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"2optionalinstall-git",children:["2.\xa0",(0,r.jsx)(n.strong,{children:"OPTIONAL:"}),"\xa0Install Git.",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#2-optional-install-git",title:"Direct link to 2-optional-install-git",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udca1\xa0Tip"}),"\n",(0,r.jsxs)(n.p,{children:["Only do if\xa0",(0,r.jsx)(n.em,{children:"not installed"}),", as above. Please follow these directions on\xa0",(0,r.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git",children:"how to install Git on Ubuntu 22.04"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"3-configure-the-globalusernameandemailsettingssetting-up-git---your-identity",children:["3. Configure the global\xa0",(0,r.jsx)(n.strong,{children:"username"}),"\xa0and\xa0",(0,r.jsx)(n.strong,{children:"email"}),"\xa0settings:\xa0",(0,r.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup",children:"Setting up Git - Your Identity"}),(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#3-configure-the-global-username-and-email-settings-setting-up-git---your-identity",title:"Direct link to 3-configure-the-global-username-and-email-settings-setting-up-git---your-identity",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"After installing and configuring Git on your EC2 instance. Please continue to the next step."}),"\n",(0,r.jsxs)(n.h3,{id:"prepare-and-clone-strapi-project-to-server",children:["Prepare and clone Strapi project to server",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#prepare-and-clone-strapi-project-to-server",title:"Direct link to Prepare and clone Strapi project to server",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["These instructions assume that you have already created a\xa0",(0,r.jsx)(n.strong,{children:"Strapi"}),"\xa0project, and have it in a\xa0",(0,r.jsx)(n.strong,{children:"GitHub"}),"\xa0repository."]}),"\n",(0,r.jsxs)(n.p,{children:["You will need to update the\xa0",(0,r.jsx)(n.code,{children:"database.json"}),"\xa0file to configure Strapi to connect to the\xa0",(0,r.jsx)(n.code,{children:"RDS"}),"\xa0database. And you will need to install an npm package called\xa0",(0,r.jsx)(n.code,{children:"pg"}),"\xa0locally on your development server."]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udca1\xa0Tip"}),"\n",(0,r.jsxs)(n.p,{children:["The\xa0",(0,r.jsx)(n.code,{children:"pg"}),"\xa0package install is only necessary if you are using\xa0",(0,r.jsx)(n.strong,{children:"PostgresSQL"}),"\xa0as your database. Make sure to uninstall the sqlite3 package if you changed your database to PostgresSQL."]}),"\n",(0,r.jsxs)(n.h4,{id:"1-installpgin-your-strapi-project",children:["1. Install\xa0",(0,r.jsx)(n.code,{children:"pg"}),"\xa0in your Strapi project.",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#1-install-pg-in-your-strapi-project",title:"Direct link to 1-install-pg-in-your-strapi-project",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["On your development machine, navigate to your Strapi project root directory:\xa0",(0,r.jsx)(n.code,{children:"Path: ./my-project/"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install pg\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"2-edit-theconfigdatabasejsfile",children:["2. Edit the\xa0",(0,r.jsx)(n.code,{children:"./config/database.js"}),"\xa0file.",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#2-edit-the-configdatabasejs-file",title:"Direct link to 2-edit-the-configdatabasejs-file",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"Copy/paste the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TypeScript"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"path: ./my-project/config/database.ts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'export default ({ env }) => ({  \r\n    connection: {    \r\n        client: "postgres",    \r\n        connection: {      \r\n              host: env("DATABASE_HOST", "127.0.0.1"),\r\n              port: env.int("DATABASE_PORT", 5432),\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0      database: env("DATABASE_NAME", "strapi"),\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0      user: env("DATABASE_USERNAME", ""),\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0      password: env("DATABASE_PASSWORD", ""),\r\n\xa0\xa0\xa0\xa0    },    useNullAsDefault: true,\r\n  },\r\n});\n'})}),"\n",(0,r.jsxs)(n.h4,{id:"3-install-thestrapi-aws-s3-upload-provider",children:["3. Install the\xa0",(0,r.jsx)(n.strong,{children:"Strapi AWS S3 Upload Provider"}),":",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#3-install-the-strapi-aws-s3-upload-provider",title:"Direct link to 3-install-the-strapi-aws-s3-upload-provider",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["Path:\xa0",(0,r.jsx)(n.code,{children:"./my-project/"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @strapi/provider-upload-aws-s3\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To enable and configure the provider, create or edit the file at\xa0",(0,r.jsx)(n.code,{children:"./config/plugins.js"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TypeScript"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export default ({ env }) => ({\r\n  upload: {\r\n      config: {\r\n          provider: 'aws-s3',\r\n          providerOptions: {\r\n              s3Options: {\r\n                  accessKeyId: env('AWS_ACCESS_KEY_ID'),\r\n                  secretAccessKey: env('AWS_ACCESS_SECRET'),\r\n                  region: env('AWS_REGION'),\r\n                  params: {\r\n                    Bucket: env('AWS_BUCKET_NAME'),\r\n                  },\r\n              }\r\n          },\r\n      },\r\n  }\r\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See the documentation about using an upload provider\xa0",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/providers",children:"here"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"4-push-your-local-changes-to-your-projects-github-repository",children:["4. Push your local changes to your project's GitHub repository",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#4-push-your-local-changes-to-your-projects-github-repository",title:"Direct link to 4. Push your local changes to your project's GitHub repository",children:"\u200b"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-git",children:"git add .\r\ngit commit -m 'Installed pg, aws-S3 upload provider and updated the config files'\r\ngit push\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"5-deploy-from-github",children:["5. Deploy from GitHub",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#5-deploy-from-github",title:"Direct link to 5. Deploy from GitHub",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["You will next deploy your Strapi project to your EC2 instance by\xa0",(0,r.jsx)(n.strong,{children:"cloning it from GitHub"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"\u270f\ufe0f\xa0Note"}),"\n",(0,r.jsxs)(n.p,{children:["Cloning a GitHub repository requires a personal access token. See the\xa0",(0,r.jsx)(n.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",children:"GitHub documentation"}),"\xa0for how to generate and use a personal access token."]}),"\n",(0,r.jsxs)(n.p,{children:["From your terminal and logged into your EC2 instance as the\xa0",(0,r.jsx)(n.code,{children:"ubuntu"}),"\xa0user:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~git clone https://github.com/your-name/your-project-repo.git\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, navigate to the\xa0",(0,r.jsx)(n.code,{children:"my-project"}),"\xa0folder, the root for Strapi. You will need to run\xa0",(0,r.jsx)(n.code,{children:"npm install"}),"\xa0to install the packages for your project. Make sure to uninstall the sqlite3 package if you changed your database to PostgresSQL."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Path: ./my-project/"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ./my-project/npm installNODE_ENV=production npm run build\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, you need to install\xa0",(0,r.jsx)(n.strong,{children:"PM2 Runtime"}),"\xa0and configure the\xa0",(0,r.jsx)(n.code,{children:"ecosystem.config.js"}),"\xa0file"]}),"\n",(0,r.jsxs)(n.h4,{id:"6-installpm2-runtime",children:["6. Install\xa0",(0,r.jsx)(n.strong,{children:"PM2 Runtime"}),(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#6-install-pm2-runtime",title:"Direct link to 6-install-pm2-runtime",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://pm2.keymetrics.io/",children:"PM2 Runtime"}),"\xa0allows you to keep your Strapi project alive and to reload it without downtime."]}),"\n",(0,r.jsxs)(n.p,{children:["Ensure you are logged in as a\xa0",(0,r.jsx)(n.strong,{children:"non-root"}),"\xa0user. You will install\xa0",(0,r.jsx)(n.strong,{children:"PM2"}),"\xa0globally:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install pm2@latest -g\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, you will need to configure an\xa0",(0,r.jsx)(n.code,{children:"ecosystem.config.js"}),"\xa0file. This file will set\xa0",(0,r.jsx)(n.code,{children:"env"}),"\xa0variables that connect Strapi to your database. It will also be used to restart your project whenever any changes are made to files within the Strapi file system itself (such as when an update arrived from Github). You can read more about this file\xa0",(0,r.jsx)(n.a,{href:"https://pm2.keymetrics.io/docs/usage/application-declaration/",children:"here"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You will need to open your\xa0",(0,r.jsx)(n.code,{children:"nano"}),"\xa0editor and then\xa0",(0,r.jsx)(n.code,{children:"copy/paste"}),"\xa0the following:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~pm2 initsudo \r\nnano ecosystem.config.js\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Next, replace the boilerplate content in the file, with the following:"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"TypeScript"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export default {\r\n  apps: [\r\n    {\r\n      name: 'your-app-name',\r\n      cwd: '/home/ubuntu/my-project',\r\n      script: 'npm',\r\n      args: 'start',\r\n      env: {\r\n        NODE_ENV: 'production',\r\n        DATABASE_HOST: 'your-unique-url.rds.amazonaws.com', // database Endpoint under 'Connectivity & Security' tab\r\n        DATABASE_PORT: '5432',\r\n        DATABASE_NAME: 'strapi', // DB name under 'Configuration' tab\r\n        DATABASE_USERNAME: 'postgres', // default username\r\n        DATABASE_PASSWORD: 'Password',\r\n        AWS_ACCESS_KEY_ID: 'aws-access-key-id',\r\n        AWS_ACCESS_SECRET: 'aws-access-secret', // Find it in Amazon S3 Dashboard\r\n        AWS_REGION: 'aws-region',\r\n        AWS_BUCKET_NAME: 'my-project-bucket-name',\r\n      },\r\n    },\r\n  ],\r\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can also set your environment variables in a\xa0",(0,r.jsx)(n.code,{children:".env"}),"\xa0file in your project like so:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"DATABASE_HOST=your-unique-url.rds.amazonaws.com\r\nDATABASE_PORT=5432\r\nDATABASE_NAME=strapi\r\nDATABASE_USERNAME=postgres\r\nDATABASE_PASSWORD=Password\r\nAWS_ACCESS_KEY_ID=aws-access-key-id\r\nAWS_ACCESS_SECRET=aws-access-secret\r\nAWS_REGION=aws-region\r\nAWS_BUCKET_NAME=my-project-bucket-name\n"})}),"\n",(0,r.jsxs)(n.p,{children:["We recommend you continue setting the\xa0",(0,r.jsx)(n.code,{children:"NODE_ENV"}),"\xa0variable in the\xa0",(0,r.jsx)(n.code,{children:"ecosystem.config.js"}),"\xa0file."]}),"\n",(0,r.jsxs)(n.p,{children:["Use the following command to start\xa0",(0,r.jsx)(n.code,{children:"pm2"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~pm2 start ecosystem.config.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Your Strapi project should now be available on\xa0",(0,r.jsx)(n.code,{children:"http://your-ip-address:1337/"}),". Your IP address will be the one corresponding to your Ubuntu server."]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udca1\xa0Tip"}),"\n",(0,r.jsxs)(n.p,{children:["Earlier,\xa0",(0,r.jsx)(n.code,{children:"Port 1337"}),"\xa0was allowed access for\xa0",(0,r.jsx)(n.strong,{children:"testing and setup"}),"\xa0purposes. After setting up\xa0",(0,r.jsx)(n.strong,{children:"NGINX"}),", the\xa0",(0,r.jsx)(n.strong,{children:"Port 1337"}),"\xa0needs to have access\xa0",(0,r.jsx)(n.strong,{children:"denied"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"7-configurepm2-runtimeto-launch-project-on-system-startup",children:["7. Configure\xa0",(0,r.jsx)(n.strong,{children:"PM2 Runtime"}),"\xa0to launch project on system startup.",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#7-configure-pm2-runtime-to-launch-project-on-system-startup",title:"Direct link to 7-configure-pm2-runtime-to-launch-project-on-system-startup",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps below to have your app launch on system startup."}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udca1\xa0Tip"}),"\n",(0,r.jsxs)(n.p,{children:["These steps are based on the\xa0",(0,r.jsx)(n.a,{href:"https://pm2.keymetrics.io/docs/usage/startup/#startup-script-generator",children:"PM2 Runtime Startup Guide"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generate and configure a startup script to launch PM2, it will generate a Startup Script to copy/paste, do so:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ cd ~\r\n$ pm2 startup systemd\r\n\r\n[PM2] Init System found: systemd\r\n[PM2] To setup the Startup Script, copy/paste the following command:\r\nsudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u your-name --hp /home/your-name\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Copy/paste the generated command:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u your-name --hp /home/your-name\r\n\r\n[PM2] Init System found: systemd\r\nPlatform systemd\r\n\r\n. . .\r\n\r\n\r\n[PM2] [v] Command successfully executed.\r\n+---------------------------------------+\r\n[PM2] Freeze a process list on reboot via:\r\n   $ pm2 save[PM2] Remove init script via:\r\n   $ pm2 unstartup systemd\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Next,\xa0",(0,r.jsx)(n.code,{children:"Save"}),"\xa0the new PM2 process list and environment."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 save\r\n\r\n[PM2] Saving current process list...\r\n[PM2] Successfully saved in /home/your-name/.pm2/dump.pm2\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OPTIONAL"}),": You can test to see if the script above works whenever your system reboots with the\xa0",(0,r.jsx)(n.code,{children:"sudo reboot"}),"\xa0command. You will need to login again with your\xa0",(0,r.jsx)(n.strong,{children:"non-root user"}),"\xa0and then run\xa0",(0,r.jsx)(n.code,{children:"pm2 list"}),"\xa0and\xa0",(0,r.jsx)(n.code,{children:"systemctl status pm2-ubuntu"}),"\xa0to verify everything is working."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"create-you-first-administrator-user",children:["Create you first Administrator user",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#create-you-first-administrator-user",title:"Direct link to Create you first Administrator user",children:"\u200b"})]}),"\n",(0,r.jsx)(n.p,{children:"The next steps will create an Administrator user on the strapi AWS instance."}),"\n",(0,r.jsxs)(n.h4,{id:"1-locate-youripv4-public-ip",children:["1. Locate your\xa0",(0,r.jsx)(n.code,{children:"IPv4 Public IP"}),(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#1-locate-your-ipv4-public-ip",title:"Direct link to 1-locate-your-ipv4-public-ip",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Login as your regular user to your\xa0",(0,r.jsx)(n.code,{children:"EC2 Dashboard"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click on\xa0",(0,r.jsx)(n.code,{children:"1 Running Instances"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Below, in the\xa0",(0,r.jsx)(n.strong,{children:"Description"}),"\xa0tab, locate your\xa0",(0,r.jsx)(n.strong,{children:"IPv4 Public IP"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"2-next-create-youradministratoruser-and-login-to-strapi",children:["2. Next, create your\xa0",(0,r.jsx)(n.strong,{children:"Administrator"}),"\xa0user, and login to Strapi",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#2-next-create-your-administrator-user-and-login-to-strapi",title:"Direct link to 2-next-create-your-administrator-user-and-login-to-strapi",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to\xa0",(0,r.jsx)(n.code,{children:"http://your-ip-address:1337/admin"})]}),"\n",(0,r.jsx)(n.li,{children:"Complete the registration form."}),"\n",(0,r.jsxs)(n.li,{children:["Click\xa0",(0,r.jsx)(n.code,{children:"Ready to Start"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"set-up-a-webhook",children:["Set up a webhook",(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/deployment/amazon-aws#set-up-a-webhook",title:"Direct link to Set up a webhook",children:"\u200b"})]}),"\n",(0,r.jsxs)(n.p,{children:["Providing that your project is set-up on GitHub, you will need to configure your\xa0",(0,r.jsx)(n.strong,{children:"Strapi Project Repository"}),"\xa0with a webhook. The following article provides additional information to the steps below:\xa0",(0,r.jsx)(n.a,{href:"https://developer.github.com/webhooks/creating/",children:"GitHub Creating Webhooks Guide"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You need to access the\xa0",(0,r.jsx)(n.code,{children:"Settings"}),"\xa0tab for your\xa0",(0,r.jsx)(n.code,{children:"Strapi Project Repository"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate and click to\xa0",(0,r.jsx)(n.code,{children:"Settings"}),"\xa0for your repository."]}),"\n",(0,r.jsxs)(n.li,{children:["Click on\xa0",(0,r.jsx)(n.code,{children:"Webhooks"}),", then click\xa0",(0,r.jsx)(n.code,{children:"Add Webhook"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["The fields are filled out like this:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Payload URL: Enter\xa0",(0,r.jsx)(n.code,{children:"http://your-ip-address:8080"})]}),"\n",(0,r.jsxs)(n.li,{children:["Content type: Select\xa0",(0,r.jsx)(n.code,{children:"application/json"})]}),"\n",(0,r.jsxs)(n.li,{children:["Which events would you like to trigger this webhook: Select\xa0",(0,r.jsx)(n.code,{children:"Just the push event"})]}),"\n",(0,r.jsxs)(n.li,{children:["Secret: Enter\xa0",(0,r.jsx)(n.code,{children:"YourSecret"})]}),"\n",(0,r.jsx)(n.li,{children:"Active: Select the checkbox"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Review the fields and click\xa0",(0,r.jsx)(n.code,{children:"Add Webhook"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Next, you need to create a\xa0",(0,r.jsx)(n.code,{children:"Webhook Script"}),"\xa0on your server. These commands create a new file called\xa0",(0,r.jsx)(n.code,{children:"webhook.js"}),"\xa0which will hold two variables:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~mkdir NodeWebHookscd NodeWebHookssudo nano webhook.js\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the\xa0",(0,r.jsx)(n.code,{children:"nano"}),"\xa0editor, copy/paste the following script, but make sure to replace\xa0",(0,r.jsx)(n.code,{children:"your_secret_key"}),"\xa0and\xa0",(0,r.jsx)(n.code,{children:"repo"}),"\xa0with the values that correspond to your project, then save and exit."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["(This script creates a variable called\xa0",(0,r.jsx)(n.code,{children:"PM2_CMD"}),"\xa0which is used after pulling from GitHub to update your project. The script first changes to the home directory and then runs the variable\xa0",(0,r.jsx)(n.code,{children:"PM2_CMD"}),"\xa0as\xa0",(0,r.jsx)(n.code,{children:"pm2 restart strapi"}),". The project uses the\xa0",(0,r.jsx)(n.code,{children:"ecosystem.config.js"}),"\xa0as the point of starting your application.)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"var secret = 'your_secret_key'; // Your secret key from Settings in GitHub\r\nvar repo = '~/path-to-strapi-root-folder/'; // path to the root of your Strapi project on server\r\n\r\nconst http = require('http');\r\nconst crypto = require('crypto');\r\nconst exec = require('child_process').exec;\r\nconst PM2_CMD = 'cd ~ && pm2 startOrRestart ecosystem.config.js';\r\n\r\nhttp\r\n  .createServer(function(req, res) {\r\n    req.on('data', function(chunk) {\r\n      let sig = \r\n       'sha1=' +\r\n        crypto\r\n          .createHmac('sha1', secret)\r\n          .update(chunk.toString())\r\n          .digest('hex');\r\n\r\n      if (req.headers['x-hub-signature'] == sig) {\r\n        exec(`cd ${repo} && git pull && ${PM2_CMD}`, (error, stdout, stderr) => {\r\n          if (error) {\r\n            console.error(`exec error: ${error}`);\r\n            return;\r\n          }\r\n          console.log(`stdout: ${stdout}`);\r\n          console.log(`stderr: ${stderr}`);\r\n        });\r\n      }\r\n    });\r\n    res.end();\r\n  })\r\n  .listen(8080);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Allow the port to communicate with outside web traffic for\xa0",(0,r.jsx)(n.code,{children:"port 8080"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Within your\xa0",(0,r.jsx)(n.strong,{children:"AWS EC2"}),"\xa0dashboard:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the left hand menu, click on\xa0",(0,r.jsx)(n.code,{children:"Security Groups"}),","]}),"\n",(0,r.jsxs)(n.li,{children:["Select with the checkbox, the correct\xa0",(0,r.jsx)(n.code,{children:"Group Name"}),", e.g.\xa0",(0,r.jsx)(n.code,{children:"strapi"}),","]}),"\n",(0,r.jsxs)(n.li,{children:["At the bottom of the screen, in the\xa0",(0,r.jsx)(n.strong,{children:"Inbound"}),"\xa0tab, click\xa0",(0,r.jsx)(n.code,{children:"Edit"}),", and then\xa0",(0,r.jsx)(n.code,{children:"Add Rule"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Type:\xa0",(0,r.jsx)(n.code,{children:"Custom TCP"})]}),"\n",(0,r.jsxs)(n.li,{children:["Protocol:\xa0",(0,r.jsx)(n.code,{children:"TCP"})]}),"\n",(0,r.jsxs)(n.li,{children:["Port Range:\xa0",(0,r.jsx)(n.code,{children:"8080"})]}),"\n",(0,r.jsxs)(n.li,{children:["Source:\xa0",(0,r.jsx)(n.code,{children:"Custom"}),"\xa0",(0,r.jsx)(n.code,{children:"0.0.0.0/0, ::/0"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Then\xa0",(0,r.jsx)(n.code,{children:"Save"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["If the\xa0",(0,r.jsx)(n.code,{children:"ufw"}),"\xa0firewall is enabled, configure settings to include\xa0",(0,r.jsx)(n.code,{children:"port 8080"}),"\xa0by running the following command:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo ufw allow 8080/tcp\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Earlier you setup\xa0",(0,r.jsx)(n.code,{children:"pm2"}),"\xa0to start the services (your\xa0",(0,r.jsx)(n.strong,{children:"Strapi project"}),") whenever the\xa0",(0,r.jsx)(n.strong,{children:"EC2 instance"}),"\xa0reboots or is started. You will now do the same for the\xa0",(0,r.jsx)(n.code,{children:"webhook"}),"\xa0script."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Install the webhook as a\xa0",(0,r.jsx)(n.code,{children:"Systemd"}),"\xa0service"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Run\xa0",(0,r.jsx)(n.code,{children:"echo $PATH"}),"\xa0and copy the output for use in the next step."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~\r\necho $PATH\r\n/home/your-name/.npm-global/bin:/home/your-name/bin:/home/your-name/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a\xa0",(0,r.jsx)(n.code,{children:"webhook.service"}),"\xa0file:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/webhook.service\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the\xa0",(0,r.jsx)(n.code,{children:"nano"}),"\xa0editor, copy/paste the following script, but make sure to replace\xa0",(0,r.jsx)(n.code,{children:"ubuntu"}),"\xa0",(0,r.jsx)(n.strong,{children:"in two places"}),"\xa0if you changed the default\xa0",(0,r.jsx)(n.code,{children:"ubuntu"}),"\xa0user, and\xa0",(0,r.jsx)(n.code,{children:"paste the $PATH"}),"\xa0from above."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u270b\xa0Caution"}),"\n",(0,r.jsx)(n.p,{children:"Delete the #comments before saving, then save and exit."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[Unit]\r\nDescription=Github webhook\r\nAfter=network.target[Service]\r\nEnvironment=PATH=/PASTE-PATH_HERE #path from echo $PATH (as above)\r\nType=simpleUser=ubuntu #replace with your name, if changed from default ubuntu \r\nuserExecStart=/usr/bin/node /home/ubuntu/NodeWebHooks/webhook.js #replace with your name, if changed from default ubuntu user\r\nRestart=on-failure\r\n\r\n[Install]\r\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enable and start the new service so it starts when the system boots:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable webhook.servicesudo systemctl start webhook\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check the status of the webhook:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bs",children:"sudo systemctl status webhook\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You may test your\xa0",(0,r.jsx)(n.strong,{children:"webhook"}),"\xa0by following the instructions\xa0",(0,r.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-use-node-js-and-github-webhooks-to-keep-remote-projects-in-sync#step-4-testing-the-webhook",children:"here"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);