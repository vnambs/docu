<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-skiill/strapi/Production basis/nginx-proxy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Nginx Proxy Configuration | Voary Nambinina - Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vnambs.github.io/docu/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vnambs.github.io/docu/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vnambs.github.io/docu/docs/nginx-proxy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nginx Proxy Configuration | Voary Nambinina - Documentation"><meta data-rh="true" name="description" content="As Strapi does not handle SSL directly and hosting a Node.js service on the &quot;edge&quot; network is not a secure solution it is recommended that you use some sort of proxy application such as Nginx, Apache, HAProxy, Traefik, or others. The following documentation provides some sample configurations for Nginx, naturally these configs may not suit all environments and you will likely need to adjust them to fit your needs."><meta data-rh="true" property="og:description" content="As Strapi does not handle SSL directly and hosting a Node.js service on the &quot;edge&quot; network is not a secure solution it is recommended that you use some sort of proxy application such as Nginx, Apache, HAProxy, Traefik, or others. The following documentation provides some sample configurations for Nginx, naturally these configs may not suit all environments and you will likely need to adjust them to fit your needs."><link data-rh="true" rel="icon" href="/docu/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vnambs.github.io/docu/docs/nginx-proxy"><link data-rh="true" rel="alternate" href="https://vnambs.github.io/docu/docs/nginx-proxy" hreflang="en"><link data-rh="true" rel="alternate" href="https://vnambs.github.io/docu/docs/nginx-proxy" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://P8CX7KSFPX-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Voary Nambinina - Documentation" href="/docu/opensearch.xml">


<link rel="icon" href="/docu/img/logo.png">
<link rel="manifest" href="/docu/manifest.json">
<meta name="theme-color" content="#12affa">

<link rel="alternate" type="application/rss+xml" href="/docu/blog/rss.xml" title="Documentations RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docu/blog/atom.xml" title="Documentations Atom Feed">
<link rel="alternate" type="application/json" href="/docu/blog/feed.json" title="Documentations JSON Feed">

<script>!function(){console.log("%c vnambs Blog %c https://github.com/vnambs/docu","color: #fff; margin: 1em 0; padding: 5px 0; background: #12affa;","margin: 1em 0; padding: 5px 0; background: #efefef;");document.firstChild?.nodeType!==Node.COMMENT_NODE&&document.prepend(document.createComment("\nThis Webisite Powered By vnambs Blog.\nWritten by Docusaurus, Coding with Love.\n--------\nLove what you do and do what you love.\n"))}()</script><link rel="stylesheet" href="/docu/assets/css/styles.0adb984a.css">
<script src="/docu/assets/js/runtime~main.94b86736.js" defer="defer"></script>
<script src="/docu/assets/js/main.32274161.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docu/"><div class="navbar__logo"><img src="/docu/img/logos.jpg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docu/img/logos.jpg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Jonathan Voary Nambinina</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docu/blog">Blog</a><a class="navbar__item navbar__link" href="/docu/project">Projects</a><a class="navbar__item navbar__link" href="/docu/topic">Topics</a><a class="navbar__item navbar__link" href="/docu/about">About</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docu/blog/archive">Archive</a></li><li><a class="dropdown__link" href="/docu/docs/skill">Notes</a></li><li><a class="dropdown__link" href="/docu/docs/tools">Tool Recommendations</a></li></ul></div><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/docu/"><img src="/docu/img/logos.jpg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docu/img/logos.jpg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Jonathan Voary Nambinina</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docu/docs/skill">Technical Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docu/docs/category/tutorial---basics">skiill</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docu/docs/category/tutorial---basics">docusaurus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docu/docs/aws-deploy">strapi</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docu/docs/aws-deploy">Production basis</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docu/docs/aws-deploy">AWS deployement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docu/docs/certbot">Certbot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docu/docs/nginx-proxy">Nginx Proxy Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docu/docs/nginx-strapi">Nginx and Strapi</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docu/docs/node">Installing Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docu/docs/strapi-deploy">Strapi deployement</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docu/docs/tools">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docu/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">skiill</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">strapi</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Production basis</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Nginx Proxy Configuration</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nginx Proxying</h1></header>
<p>As Strapi does not handle SSL directly and hosting a Node.js service on the &quot;edge&quot; network is not a secure solution it is recommended that you use some sort of proxy application such as Nginx, Apache, HAProxy, Traefik, or others. The following documentation provides some sample configurations for Nginx, naturally these configs may not suit all environments and you will likely need to adjust them to fit your needs.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuration">Configuration<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#configuration" target="_blank" rel="noopener noreferrer" title="Direct link to Configuration">​</a><a href="#configuration" class="hash-link" aria-label="Direct link to configuration" title="Direct link to configuration">​</a></h2>
<p>The following configuration is based on Nginx virtual hosts, this means that you create configurations for each domain to allow serving multiple domains on the same port such as 80 (HTTP) or 443 (HTTPS). It also uses a central upstream file to store an alias to allow for easier management, load balancing, and failover in the case of clustering multiple Strapi deployments.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="strapi-server">Strapi server<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#strapi-server" target="_blank" rel="noopener noreferrer" title="Direct link to Strapi server">​</a><a href="#strapi-server" class="hash-link" aria-label="Direct link to strapi-server" title="Direct link to strapi-server">​</a></h3>
<p>In order to take full advantage of a proxied Strapi application, Strapi should be configured so it&#x27;s aware of the upstream proxy. Like with the below configurations there are 3 matching examples. Additional information can be found in the <a href="https://docs.strapi.io/dev-docs/configurations/server" target="_blank" rel="noopener noreferrer">server configuration</a> and <a href="https://docs.strapi.io/dev-docs/configurations/admin-panel" target="_blank" rel="noopener noreferrer">admin configuration</a> documentations.</p>
<p>✏️ Note</p>
<p>These examples use the default API Prefix of <code>/api</code>. This can be changed without the need to directly modify the Nginx configuration (see the <a href="https://docs.strapi.io/dev-docs/configurations/api" target="_blank" rel="noopener noreferrer">API prefix</a> documentation).</p>
<p>✋ Caution</p>
<p>If the <code>url</code> key is changed in the <code>./config/admin.js</code> or <code>./config/server.js</code> files, the admin panel needs to be rebuilt with <code>yarn build</code> or <code>npm run build</code>.</p>
<ul>
<li>Subdomain</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subdomain-strapi-configuration">Subdomain Strapi configuration<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#subdomain-strapi-configuration" target="_blank" rel="noopener noreferrer" title="Direct link to Subdomain Strapi configuration">​</a><a href="#subdomain-strapi-configuration" class="hash-link" aria-label="Direct link to subdomain-strapi-configuration" title="Direct link to subdomain-strapi-configuration">​</a></h4>
<hr>
<ul>
<li>
<p>Example domain: <code>api.example.com</code></p>
</li>
<li>
<p>Example admin: <code>api.example.com/admin</code></p>
</li>
<li>
<p>Example API: <code>api.example.com/api</code></p>
</li>
<li>
<p>Example uploaded files (local provider): <code>api.example.com/uploads</code></p>
</li>
<li>
<p>JavaScript</p>
</li>
<li>
<p>TypeScript</p>
</li>
</ul>
<p>path: ./config/server.ts</p>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">export</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">default</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> env </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  host</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">env</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;HOST&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  port</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> env</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">int</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;PORT&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1337</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  url</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;https://api.example.com&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Subfolder unified</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subfolder-unified-strapi-configuration">Subfolder unified Strapi configuration<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#subfolder-unified-strapi-configuration" target="_blank" rel="noopener noreferrer" title="Direct link to Subfolder unified Strapi configuration">​</a><a href="#subfolder-unified-strapi-configuration" class="hash-link" aria-label="Direct link to subfolder-unified-strapi-configuration" title="Direct link to subfolder-unified-strapi-configuration">​</a></h4>
<hr>
<ul>
<li>
<p>Example domain: <code>example.com/test</code></p>
</li>
<li>
<p>Example admin: <code>example.com/test/admin</code></p>
</li>
<li>
<p>Example API: <code>example.com/test/api</code></p>
</li>
<li>
<p>Example uploaded Files (local provider): <code>example.com/test/uploads</code></p>
</li>
<li>
<p>JavaScript</p>
</li>
<li>
<p>TypeScript</p>
</li>
</ul>
<p>path: ./config/server.ts</p>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">export</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">default</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> env </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  host</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">env</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;HOST&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  port</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> env</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">int</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;PORT&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1337</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  url</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;https://example.com/test&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nginx-upstream">Nginx Upstream<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#nginx-upstream" target="_blank" rel="noopener noreferrer" title="Direct link to Nginx Upstream">​</a><a href="#nginx-upstream" class="hash-link" aria-label="Direct link to nginx-upstream" title="Direct link to nginx-upstream">​</a></h3>
<p>Upstream blocks are used to map an alias such as <code>strapi</code> to a specific URL such as <code>localhost:1337</code>. While it would be useful to define these in each virtual host file, Nginx currently doesn&#x27;t support loading these within the virtual host if you have multiple virtual host files. Instead, configure these within the <code>conf.d</code> directory as this is loaded before any virtual host files.</p>
<p>In the following configuration the <code>localhost:1337</code> is mapped to the Nginx alias <code>strapi</code>:</p>
<div class="codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-text codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># path: /etc/nginx/conf.d/upstream.conf</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># Strapi server</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">upstream strapi {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    server 127.0.0.1:1337;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nginx-virtual-host">Nginx Virtual Host<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#nginx-virtual-host" target="_blank" rel="noopener noreferrer" title="Direct link to Nginx Virtual Host">​</a><a href="#nginx-virtual-host" class="hash-link" aria-label="Direct link to nginx-virtual-host" title="Direct link to nginx-virtual-host">​</a></h3>
<p>Virtual host files are what store the configuration for a specific app, service, or proxied service. For usage with Strapi this virtual host file is handling HTTPS connections and proxying them to Strapi running locally on the server. This configuration also redirects all HTTP requests to HTTPs using a 301 redirect.</p>
<p>In the following examples you will need to replace your domain and likewise your paths to SSL certificates will need to be changed based on where you place them or, if you are using Let&#x27;s Encrypt, where your script places them. Please also note that while the following path shows <code>sites-available</code> you will need to symlink the file to <code>sites-enabled</code> in order for Nginx to enable the config.</p>
<p>The following are 2 example Nginx configurations:</p>
<ul>
<li>subdomain based such as <code>api.example.com</code></li>
<li>subfolder based with both the API and Admin on the same subfolder such as <code>example.com/test/api</code> and <code>example.com/test/admin</code></li>
</ul>
<p>✏️ Subfolder split is not supported</p>
<p>Using subfolder split (eg: <code>https://example.com/dashboard</code> and <code>https://example.com/api</code>) are not supported nor recommended with Strapi. It&#x27;s advised that you either use subdomains (eg: <code>https://api.example.com</code>) or subfolder unified (eg: <code>https://example.com/strapi/dashboard</code> and <code>https://example.com/strapi/api</code>).</p>
<ul>
<li>Subdomain</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subdomain">Subdomain<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#subdomain" target="_blank" rel="noopener noreferrer" title="Direct link to Subdomain">​</a><a href="#subdomain" class="hash-link" aria-label="Direct link to subdomain" title="Direct link to subdomain">​</a></h4>
<p>This configuration is using the subdomain that is dedicated to Strapi only. It will redirect normal HTTP traffic over to SSL and proxies all requests (both API and admin) to the Strapi server running on the upstream alias configured above.</p>
<hr>
<ul>
<li>Example domain: <code>api.example.com</code></li>
<li>Example admin panel: <code>api.example.com/admin</code></li>
<li>Example API: <code>api.example.com/api</code></li>
<li>Example uploaded Files (local provider): <code>api.example.com/uploads</code></li>
</ul>
<div class="codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-text codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># path: /etc/nginx/sites-available/strapi.conf</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">server {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Listen HTTP</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    server_name api.example.com;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Redirect HTTP to HTTPS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    return 301 https://$host$request_uri;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">server {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Listen HTTPS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    listen 443 ssl;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    server_name api.example.com;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # SSL config</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    ssl_certificate /path/to/your/certificate/file;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    ssl_certificate_key /path/to/your/certificate/key;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Proxy Config</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_pass http://strapi;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Host $host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Server $host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Connection &quot;Upgrade&quot;;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_pass_request_headers on;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subfolder-unified">Subfolder unified<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#subfolder-unified" target="_blank" rel="noopener noreferrer" title="Direct link to Subfolder unified">​</a><a href="#subfolder-unified" class="hash-link" aria-label="Direct link to subfolder-unified" title="Direct link to subfolder-unified">​</a></h4>
<p>This configuration is using a subfolder dedicated to Strapi only. It will redirect normal HTTP traffic over to SSL and hosts the front-end files on <code>/var/www/html</code> like a normal web server, but proxies all strapi requests on the <code>example.com/test</code> sub-path.</p>
<p>✏️ Note</p>
<p>This example configuration is not focused on the front end hosting and should be adjusted to your front-end software requirements.</p>
<hr>
<ul>
<li>Example domain: <code>example.com/test</code></li>
<li>Example admin: <code>example.com/test/admin</code></li>
<li>Example API: <code>example.com/test/api</code></li>
<li>Example uploaded files (local provider): <code>example.com/test/uploads</code></li>
</ul>
<div class="codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-text codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># path: /etc/nginx/sites-available/strapi.conf</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">server {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Listen HTTP</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    server_name example.com;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Redirect HTTP to HTTPS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    return 301 https://$host$request_uri;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">server {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Listen HTTPS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    listen 443 ssl;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    server_name example.com;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # SSL config</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    ssl_certificate /path/to/your/certificate/file;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    ssl_certificate_key /path/to/your/certificate/key;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Static Root</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        root /var/www/html;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    # Strapi API and Admin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    location /test/ {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        rewrite ^/test/?(.*)$ /$1 break;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_pass http://strapi;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Host $host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Server $host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_set_header Connection &quot;Upgrade&quot;;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        proxy_pass_request_headers on;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redirecting-landing-page-to-admin-panel">Redirecting landing page to admin panel<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#redirecting-landing-page-to-admin-panel" target="_blank" rel="noopener noreferrer" title="Direct link to Redirecting landing page to admin panel">​</a><a href="#redirecting-landing-page-to-admin-panel" class="hash-link" aria-label="Direct link to redirecting-landing-page-to-admin-panel" title="Direct link to redirecting-landing-page-to-admin-panel">​</a></h3>
<p>If you do not wish to have the default landing page mounted on <code>/</code> you can create a custom middleware using the sample code below to automatically redirect to your admin panel.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redirecting-landing-page-to-admin-panel-1">Redirecting landing page to admin panel<a href="https://docs.strapi.io/dev-docs/deployment/nginx-proxy#redirecting-landing-page-to-admin-panel" target="_blank" rel="noopener noreferrer" title="Direct link to Redirecting landing page to admin panel">​</a><a href="#redirecting-landing-page-to-admin-panel-1" class="hash-link" aria-label="Direct link to redirecting-landing-page-to-admin-panel-1" title="Direct link to redirecting-landing-page-to-admin-panel-1">​</a></h3>
<p>If you do not wish to have the default landing page mounted on <code>/</code> you can create a custom middleware using the sample code below to automatically redirect to your admin panel.</p>
<p>✋ Caution</p>
<p>This sample configuration expects that the admin panel is accessible on <code>/admin</code>. If you used one of the above configurations to change this to <code>/dashboard</code> you will also need to adjust this sample configuration.</p>
<p>./config/middlewares.js</p>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function-variable function" style="color:hsl(221, 87%, 60%)">exports</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> env </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// ...    { resolve: &#x27;./src/middlewares/admin-redirect&#x27; },</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>./src/middlewares/admin-redirect.js</p>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_m3Ux"><pre class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function-variable function" style="color:hsl(221, 87%, 60%)">exports</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">_config</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> strapi </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">const</span><span class="token plain"> redirects </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/index.html&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">map</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        method</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;GET&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token function-variable function" style="color:hsl(221, 87%, 60%)">handler</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">redirect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/admin&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        config</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> auth</span><span class="token operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    strapi</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">server</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">routes</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">redirects</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/skiill/strapi/Production basis/NGINX-Proxy.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link border-2 border-link hover:bg-[#a1d8f71b] pagination-nav__link--prev" href="/docu/docs/certbot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Certbot</div></a><a class="pagination-nav__link border-2 border-link hover:bg-[#a1d8f71b] pagination-nav__link--next" href="/docu/docs/nginx-strapi"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nginx and Strapi</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop" style="opacity:0.0001;will-change:opacity,transform;transform:translateX(100px)"><ul class="table-of-contents pl-0"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration​</a><ul><li><a href="#strapi-server" class="table-of-contents__link toc-highlight">Strapi server​</a></li><li><a href="#nginx-upstream" class="table-of-contents__link toc-highlight">Nginx Upstream​</a></li><li><a href="#nginx-virtual-host" class="table-of-contents__link toc-highlight">Nginx Virtual Host​</a></li><li><a href="#redirecting-landing-page-to-admin-panel" class="table-of-contents__link toc-highlight">Redirecting landing page to admin panel​</a></li><li><a href="#redirecting-landing-page-to-admin-panel-1" class="table-of-contents__link toc-highlight">Redirecting landing page to admin panel​</a></li></ul></li></ul><hr class="hr_UhE0"><span class="percent_H6RK">0%<!-- --> </span></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/docu/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/docu/project">Projects</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/docu/topic">Topics</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/docu/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/docu/blog/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/docu/docs/skill">Notes</a></li><li class="footer__item"><a class="footer__link-item" href="/docu/docs/tools">Tool Recommendations</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docu/about">About</a></li><li class="footer__item"><a href="https://github.com/vnambs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/VoaryNambs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/users/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Voary Nambinina, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>